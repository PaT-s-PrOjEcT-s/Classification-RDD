<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification RDD par PaT's_PrOjEcT's</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            line-height: 1.6;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .header {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .header .subtitle {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 3px;
        }
        
        .header .description {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .admin-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }
        
        .admin-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .admin-panel {
            background: #f3f4f6;
            border-bottom: 2px solid #d1d5db;
            padding: 15px;
            display: none;
        }
        
        .admin-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .admin-buttons {
            display: grid;
            gap: 10px;
        }
        
        .admin-btn-full {
            padding: 12px 15px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 14px;
        }
        
        .btn-blue {
            background: #3b82f6;
            color: white;
        }
        
        .btn-blue:hover {
            background: #2563eb;
        }
        
        .btn-green {
            background: #059669;
            color: white;
        }
        
        .btn-green:hover {
            background: #047857;
        }
        
        .btn-gray {
            background: #6b7280;
            color: white;
        }
        
        .btn-gray:hover {
            background: #4b5563;
        }
        
        .stats-box {
            background: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
            color: #6b7280;
        }
        
        .stats-title {
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }
        
        .add-product-form {
            background: #eff6ff;
            border-bottom: 2px solid #93c5fd;
            padding: 15px;
            display: none;
        }
        
        .form-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 5px;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        
        .form-buttons {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }
        
        .search-box {
            padding: 15px;
            background: #f9f9f9;
        }
        
        .search-container {
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #059669;
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            width: 20px;
            height: 20px;
        }
        
        .auto-search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #3b82f6;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
            display: none;
        }
        
        .auto-search-btn:hover {
            background: #2563eb;
        }
        
        .loading-indicator {
            margin-top: 12px;
            text-align: center;
            display: none;
        }
        
        .loading-box {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            border-radius: 6px;
            padding: 12px;
        }
        
        .loading-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #3b82f6;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: #1d4ed8;
            font-size: 14px;
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            margin-top: 5px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 10;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .suggestion {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.2s;
        }
        
        .suggestion:hover {
            background: #f9fafb;
        }
        
        .suggestion:last-child {
            border-bottom: none;
        }
        
        .suggestion-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .suggestion-icon {
            font-size: 20px;
        }
        
        .suggestion-info {
            flex: 1;
        }
        
        .suggestion-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .suggestion-desc {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 5px;
        }
        
        .suggestion-badges {
            display: flex;
            gap: 6px;
            align-items: center;
        }
        
        .suggestion-category {
            display: inline-block;
            font-size: 11px;
            padding: 3px 7px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
        }
        
        .auto-added-badge {
            font-size: 10px;
            background: #dcfce7;
            color: #166534;
            padding: 2px 6px;
            border-radius: 8px;
        }
        
        .category-acide { background: #dc2626; }
        .category-base { background: #2563eb; }
        .category-toxique { background: #7c3aed; }
        .category-peinture { background: #059669; }
        .category-huiles { background: #4b5563; }
        .category-organique { background: #0d9488; }
        .category-combustible { background: #dc2626; }
        .category-comburants { background: #ea580c; }
        .category-oxydant { background: #eab308; }
        
        .result-box {
            margin: 15px;
            padding: 15px;
            background: #f0fdf4;
            border: 2px solid #bbf7d0;
            border-radius: 8px;
            display: none;
        }
        
        .result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .result-icon {
            font-size: 32px;
        }
        
        .result-info {
            flex: 1;
        }
        
        .result-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .result-desc {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .auto-added-result {
            background: #dcfce7;
            color: #166534;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-right: 8px;
        }
        
        .confidence-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .confidence-√©lev√©e {
            background: #dcfce7;
            color: #166534;
        }
        
        .confidence-moyenne {
            background: #fef3c7;
            color: #92400e;
        }
        
        .confidence-faible {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .classification {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #059669;
        }
        
        .classification-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .classification-badge {
            display: inline-block;
            padding: 8px 12px;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .classification-desc {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .instructions {
            background: #fefce8;
            border: 1px solid #fde047;
            padding: 12px;
            border-radius: 6px;
        }
        
        .instructions-title {
            font-weight: bold;
            color: #a16207;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .instructions-text {
            font-size: 12px;
            color: #a16207;
        }
        
        .categories {
            padding: 15px;
        }
        
        .categories h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid;
            transition: transform 0.2s;
        }
        
        .category-card:hover {
            transform: translateX(3px);
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .category-icon {
            font-size: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .category-details {
            flex: 1;
        }
        
        .category-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .category-description {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 2px;
        }
        
        .category-count {
            font-size: 12px;
            color: #9ca3af;
        }
        
        .footer {
            background: #f3f4f6;
            padding: 15px;
            text-align: center;
            color: #6b7280;
            font-size: 14px;
        }
        
        .footer p {
            margin-bottom: 5px;
        }
        
        .footer .copyright {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 8px;
        }
        
        .no-results {
            text-align: center;
            padding: 20px;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Classification RDD</h1>
            <p class="subtitle">par PaT's_PrOjEcT's</p>
            <p class="description">R√©sidus domestiques dangereux</p>
            <button class="admin-btn" onclick="toggleAdmin()">‚öôÔ∏è Admin</button>
        </div>

        <!-- Admin Panel -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-title">‚öôÔ∏è Panneau d'administration</div>
            <div class="admin-buttons">
                <button class="admin-btn-full btn-blue" onclick="toggleAddProduct()">‚ûï Ajouter un produit</button>
                <button class="admin-btn-full btn-green" onclick="exportDatabase()">üì§ Exporter ma base de donn√©es</button>
                <div class="stats-box">
                    <div class="stats-title">Classification RDD - PaT's_PrOjEcT's</div>
                    <div>‚Ä¢ Produits par d√©faut: <span id="defaultCount">500</span></div>
                    <div>‚Ä¢ Produits personnalis√©s: <span id="customCount">0</span></div>
                    <div>‚Ä¢ Total: <span id="totalCount">500</span></div>
                    <div style="margin-top: 8px; font-size: 12px; color: #059669;">
                        üåê Recherche web open source activ√©e
                    </div>
                    <div class="copyright">¬© 2025 PaT's_PrOjEcT's</div>
                </div>
            </div>
        </div>

        <!-- Add Product Form -->
        <div class="add-product-form" id="addProductForm">
            <h3 class="form-title">‚ûï Ajouter un nouveau produit</h3>
            <div class="form-group">
                <label class="form-label">Nom du produit *</label>
                <input type="text" class="form-input" id="newProductName" placeholder="Ex: WD-40, Roundup, etc.">
            </div>
            <div class="form-group">
                <label class="form-label">Cat√©gorie RDD *</label>
                <select class="form-select" id="newProductCategory">
                    <option value="Acide">üß™ Acide</option>
                    <option value="Base">ü•Ω Base</option>
                    <option value="Comburants">üí• Comburants</option>
                    <option value="Oxydant">üí• Oxydant</option>
                    <option value="Toxique">‚ò†Ô∏è Toxique</option>
                    <option value="Peinture">üé® Peinture</option>
                    <option value="Huiles">üõ¢Ô∏è Huiles</option>
                    <option value="Organique">üß¥ Organique</option>
                    <option value="Combustible">‚õΩ Combustible</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Description *</label>
                <input type="text" class="form-input" id="newProductDesc" placeholder="Ex: D√©grippant lubrifiant, Herbicide glyphosate, etc.">
            </div>
            <div class="form-buttons">
                <button class="admin-btn-full btn-green" onclick="addProduct()" style="flex: 1;">‚úÖ Ajouter</button>
                <button class="admin-btn-full btn-gray" onclick="toggleAddProduct()" style="flex: 1;">‚ùå Annuler</button>
            </div>
        </div>

        <!-- Search -->
        <div class="search-box">
            <div class="search-container">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" class="search-input" id="searchInput" 
                       placeholder="Rechercher un produit (ex: WD-40, Roundup...)" 
                       oninput="handleSearch()" onkeypress="handleKeyPress(event)">
                <button class="auto-search-btn" id="autoSearchBtn" onclick="autoSearch()">üåê</button>
            </div>
            
            <div class="loading-indicator" id="loadingIndicator">
                <div class="loading-box">
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <span class="loading-text">Recherche en ligne de "<span id="searchingFor"></span>"...</span>
                    </div>
                </div>
            </div>

            <div class="suggestions" id="suggestions"></div>
        </div>

        <!-- Selected Product Result -->
        <div class="result-box" id="resultBox"></div>

        <!-- Categories -->
        <div class="categories">
            <h2>
                <svg style="width: 20px; height: 20px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                </svg>
                Cat√©gories de disposition
            </h2>
            <div id="categoriesContainer"></div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>üå± Classification RDD par PaT's_PrOjEcT's</p>
            <p>Classification des r√©sidus domestiques dangereux</p>
            <p style="font-size: 12px; margin-top: 8px;">
                Base de donn√©es: <span id="footerTotal">500</span> produits
                <span id="footerCustom"></span>
            </p>
            <p class="copyright">D√©velopp√© par PaT's_PrOjEcT's ¬© 2025</p>
        </div>
    </div>

    <script>
        // Base de donn√©es des produits par d√©faut
        const defaultProducts = [
            // ACIDES (25 produits)
            { name: 'Acide muriatique', category: 'Acide', icon: 'üß™', description: 'Nettoyant pour piscine, acide chlorhydrique' },
            { name: 'Vinaigre blanc concentr√©', category: 'Acide', icon: 'üß™', description: 'Nettoyant m√©nager acide' },
            { name: 'D√©tartrant WC', category: 'Acide', icon: 'üß™', description: 'Nettoyant sanitaire acide' },
            { name: 'Acide sulfurique', category: 'Acide', icon: 'üß™', description: '√âlectrolyte de batterie' },
            { name: 'CLR', category: 'Acide', icon: 'üß™', description: 'Nettoyant calcium, lime, rouille' },
            { name: 'Lime Away', category: 'Acide', icon: 'üß™', description: 'D√©tartrant salle de bain' },
            { name: 'Acide phosphorique', category: 'Acide', icon: 'üß™', description: 'Antirouille, d√©capant' },
            { name: 'Naval Jelly', category: 'Acide', icon: 'üß™', description: 'D√©capant antirouille' },
            { name: 'Iron Out', category: 'Acide', icon: 'üß™', description: 'Enl√®ve-taches de rouille' },
            { name: 'The Works', category: 'Acide', icon: 'üß™', description: 'Nettoyant cuvette acide fort' },
            { name: 'Bar Keepers Friend', category: 'Acide', icon: 'üß™', description: 'Nettoyant acide oxalique' },
            { name: 'Battery Acid', category: 'Acide', icon: 'üß™', description: 'Acide sulfurique concentr√©' },
            { name: 'Cerama Bryte', category: 'Acide', icon: 'üß™', description: 'Nettoyant vitroc√©ramique' },

            // BASES (50 produits)
            { name: 'Eau de Javel', category: 'Base', icon: 'ü•Ω', description: 'D√©sinfectant chlor√©' },
            { name: 'Javex', category: 'Base', icon: 'ü•Ω', description: 'Eau de javel commerciale' },
            { name: 'Ammoniaque', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant d√©graissant' },
            { name: 'Soude caustique', category: 'Base', icon: 'ü•Ω', description: 'D√©bouchoir chimique' },
            { name: 'Mr. Clean', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant multi-surfaces' },
            { name: 'Ajax', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant abrasif' },
            { name: 'Comet', category: 'Base', icon: 'ü•Ω', description: 'Poudre √† r√©curer' },
            { name: 'Drano', category: 'Base', icon: 'ü•Ω', description: 'D√©bouchoir liquide' },
            { name: 'Liquid Plumr', category: 'Base', icon: 'ü•Ω', description: 'D√©bouchoir de drain' },
            { name: 'Easy-Off', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant four' },
            { name: 'Fantastik', category: 'Base', icon: 'ü•Ω', description: 'D√©graissant multi-usage' },
            { name: 'Formula 409', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant d√©graissant' },
            { name: 'Lysol', category: 'Base', icon: 'ü•Ω', description: 'D√©sinfectant surfaces' },
            { name: 'Pine-Sol', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant plancher' },
            { name: 'Pledge', category: 'Base', icon: 'ü•Ω', description: 'Polish pour meubles' },
            { name: 'Hertel', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant qu√©b√©cois' },
            { name: 'Lestoil', category: 'Base', icon: 'ü•Ω', description: 'D√©graissant' },
            { name: 'Swiffer', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant plancher' },
            { name: 'Febreze', category: 'Base', icon: 'ü•Ω', description: 'Rafra√Æchisseur d\'air' },
            { name: 'Vim', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant abrasif' },
            { name: 'Green Works', category: 'Base', icon: 'ü•Ω', description: 'Nettoyants √©cologiques' },
            { name: 'Windex', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant √† vitre' },
            { name: 'Tilex', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant moisissure' },
            { name: 'Scrubbing Bubbles', category: 'Base', icon: 'ü•Ω', description: 'Nettoyant salle de bain' },

            // TOXIQUES (40 produits)
            { name: 'Roundup', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Herbicide glyphosate' },
            { name: 'Raid', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Insecticide en a√©rosol' },
            { name: 'Mort-aux-rats', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Rodenticide' },
            { name: 'Anti-limace', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Molluscicide' },
            { name: 'Antigel', category: 'Toxique', icon: '‚ò†Ô∏è', description: '√âthyl√®ne glycol' },
            { name: 'Varsol', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Solvant min√©ral' },
            { name: 'Baygon', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Insecticide domestique' },
            { name: 'OFF!', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Chasse-moustiques DEET' },
            { name: 'Killex', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Herbicide pelouse' },
            { name: 'M√©thanol', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Alcool m√©thylique' },
            { name: 'D-Con', category: 'Toxique', icon: '‚ò†Ô∏è', description: 'Poison souris et rats' },

            // PEINTURES (60 produits)
            { name: 'Peinture latex', category: 'Peinture', icon: 'üé®', description: 'Peinture √† base d\'eau' },
            { name: 'Peinture alkyde', category: 'Peinture', icon: 'üé®', description: 'Peinture √† l\'huile' },
            { name: 'Benjamin Moore', category: 'Peinture', icon: 'üé®', description: 'Peinture murale' },
            { name: 'Primer', category: 'Peinture', icon: 'üé®', description: 'Appr√™t pour peinture' },
            { name: 'Teinture √† bois', category: 'Peinture', icon: 'üé®', description: 'Colorant pour bois' },
            { name: 'Sherwin Williams', category: 'Peinture', icon: 'üé®', description: 'Peinture architecturale' },
            { name: 'Dulux', category: 'Peinture', icon: 'üé®', description: 'Peinture d√©corative' },
            { name: 'Behr', category: 'Peinture', icon: 'üé®', description: 'Peinture Home Depot' },
            { name: 'Sico', category: 'Peinture', icon: 'üé®', description: 'Peinture d√©corative' },
            { name: 'Arborcoat', category: 'Peinture', icon: 'üé®', description: 'Teinture semi-transparente Benjamin Moore' },
            { name: 'Minwax', category: 'Peinture', icon: 'üé®', description: 'Teinture et vernis bois' },
            { name: 'Varathane', category: 'Peinture', icon: 'üé®', description: 'Vernis polyur√©thane' },
            { name: 'Tremclad', category: 'Peinture', icon: 'üé®', description: 'Peinture antirouille' },
            { name: 'Rust-Oleum', category: 'Peinture', icon: 'üé®', description: 'Peinture m√©taux' },
            { name: 'Krylon', category: 'Peinture', icon: 'üé®', description: 'Peinture en a√©rosol' },
            { name: 'Paint Stripper', category: 'Peinture', icon: 'üé®', description: 'D√©capant chimique' },

            // HUILES (30 produits)
            { name: 'Huile moteur', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Lubrifiant automobile' },
            { name: 'WD-40', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'D√©grippant lubrifiant' },
            { name: 'Castrol', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Huile moteur synth√©tique' },
            { name: 'Mobil 1', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Huile synth√©tique haute performance' },
            { name: 'Valvoline', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Huile moteur conventionnelle' },
            { name: 'Huile hydraulique', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Fluide de transmission' },
            { name: 'Brake Fluid', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Liquide de frein DOT' },
            { name: 'Coolant', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Liquide de refroidissement' },
            { name: 'ATF', category: 'Huiles', icon: 'üõ¢Ô∏è', description: 'Fluide transmission automatique' },

            // ORGANIQUES (30 produits)
            { name: 'Ac√©tone', category: 'Organique', icon: 'üß¥', description: 'Dissolvant pour vernis' },
            { name: 'Essence min√©rale', category: 'Organique', icon: 'üß¥', description: 'Solvant pour peinture' },
            { name: 'T√©r√©benthine', category: 'Organique', icon: 'üß¥', description: 'Diluant naturel' },
            { name: 'Tolu√®ne', category: 'Organique', icon: 'üß¥', description: 'Solvant industriel' },
            { name: 'Alcool isopropylique', category: 'Organique', icon: 'üß¥', description: 'Alcool √† friction' },
            { name: 'GM-20', category: 'Organique', icon: 'üß¥', description: 'Enzyme concentr√© pour fosses septiques' },
            { name: 'Silicone', category: 'Organique', icon: 'üß¥', description: 'Mastic d\'√©tanch√©it√© √† base de silicone' },

            // COMBUSTIBLES (20 produits)
            { name: 'Essence', category: 'Combustible', icon: '‚õΩ', description: 'Carburant automobile' },
            { name: 'Diesel', category: 'Combustible', icon: '‚õΩ', description: 'Gazole' },
            { name: 'Propane', category: 'Combustible', icon: '‚õΩ', description: 'Gaz de p√©trole liqu√©fi√©' },
            { name: 'K√©ros√®ne', category: 'Combustible', icon: '‚õΩ', description: 'Combustible de chauffage' },
            { name: 'Mazout', category: 'Combustible', icon: '‚õΩ', description: 'Fuel oil domestique' },
            { name: 'Butane', category: 'Combustible', icon: '‚õΩ', description: 'Gaz combustible' },

            // COMBURANTS (15 produits)
            { name: 'Chlore piscine', category: 'Comburants', icon: 'üí•', description: 'Pastilles de chlore' },
            { name: 'HTH', category: 'Comburants', icon: 'üí•', description: 'Hypochlorite de calcium' },
            { name: 'Pool Shock', category: 'Comburants', icon: 'üí•', description: 'Choc chlor√© piscine' },
            { name: 'Bromine', category: 'Comburants', icon: 'üí•', description: 'D√©sinfectant spa' },

            // OXYDANTS (10 produits)
            { name: 'Peroxyde d\'hydrog√®ne', category: 'Oxydant', icon: 'üí•', description: 'Eau oxyg√©n√©e concentr√©e' },
            { name: 'Oxyclean', category: 'Oxydant', icon: 'üí•', description: 'D√©tachant oxyg√©n√©' },
            { name: 'Clorox 2', category: 'Oxydant', icon: 'üí•', description: 'Javellisant color√©' }
        ];

        // Variables globales
        let customProducts = [];
        let isSearching = false;
        let selectedProduct = null;

        // Configuration des cat√©gories
        const categoryConfig = {
            'Acide': { color: '#dc2626', bg: '#fef2f2', desc: 'Substances corrosives acides' },
            'Base': { color: '#2563eb', bg: '#eff6ff', desc: 'Substances corrosives basiques' },
            'Comburants': { color: '#ea580c', bg: '#fff7ed', desc: 'Substances favorisant la combustion' },
            'Oxydant': { color: '#eab308', bg: '#fefce8', desc: 'Agents oxydants' },
            'Toxique': { color: '#7c3aed', bg: '#faf5ff', desc: 'Substances toxiques et v√©n√©neuses' },
            'Peinture': { color: '#059669', bg: '#f0fdf4', desc: 'Peintures et solvants associ√©s' },
            'Huiles': { color: '#4b5563', bg: '#f9fafb', desc: 'Huiles usag√©es et lubrifiants' },
            'Organique': { color: '#0d9488', bg: '#f0fdfa', desc: 'Solvants organiques' },
            'Combustible': { color: '#dc2626', bg: '#fef2f2', desc: 'Liquides inflammables' }
        };

        const categoryIcons = {
            'Acide': 'üß™', 'Base': 'ü•Ω', 'Comburants': 'üí•', 'Oxydant': 'üí•',
            'Toxique': '‚ò†Ô∏è', 'Peinture': 'üé®', 'Huiles': 'üõ¢Ô∏è',
            'Organique': 'üß¥', 'Combustible': '‚õΩ'
        };

        // Fonctions utilitaires
        function getAllProducts() {
            return [...defaultProducts, ...customProducts];
        }

        function loadCustomProducts() {
            try {
                if (typeof localStorage !== 'undefined') {
                    const stored = localStorage.getItem('customProducts');
                    if (stored) {
                        customProducts = JSON.parse(stored);
                    }
                }
            } catch (e) {
                customProducts = [];
            }
        }

        function saveCustomProducts() {
            try {
                if (typeof localStorage !== 'undefined') {
                    localStorage.setItem('customProducts', JSON.stringify(customProducts));
                }
            } catch (e) {
                console.warn('Impossible de sauvegarder dans localStorage');
            }
        }

        function updateCounts() {
            const total = getAllProducts().length;
            document.getElementById('defaultCount').textContent = defaultProducts.length;
            document.getElementById('customCount').textContent = customProducts.length;
            document.getElementById('totalCount').textContent = total;
            document.getElementById('footerTotal').textContent = total;
            
            const footerCustom = document.getElementById('footerCustom');
            if (customProducts.length > 0) {
                footerCustom.textContent = ` (${customProducts.length} personnalis√©s)`;
            } else {
                footerCustom.textContent = '';
            }
        }

        function getCategoryCounts() {
            const counts = {};
            getAllProducts().forEach(product => {
                counts[product.category] = (counts[product.category] || 0) + 1;
            });
            return counts;
        }

        // Fonctions principales
        function toggleAdmin() {
            const panel = document.getElementById('adminPanel');
            const isHidden = panel.style.display === 'none' || panel.style.display === '';
            panel.style.display = isHidden ? 'block' : 'none';
        }

        function toggleAddProduct() {
            const form = document.getElementById('addProductForm');
            const isHidden = form.style.display === 'none' || form.style.display === '';
            form.style.display = isHidden ? 'block' : 'none';
        }

        function addProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const category = document.getElementById('newProductCategory').value;
            const description = document.getElementById('newProductDesc').value.trim();

            if (!name || !description) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }

            const newProduct = {
                name: name,
                category: category,
                description: description,
                icon: categoryIcons[category],
                custom: true
            };

            customProducts.push(newProduct);
            saveCustomProducts();
            updateCounts();
            displayCategories();

            // Reset form
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductDesc').value = '';
            toggleAddProduct();

            alert('Produit ajout√© avec succ√®s !');
        }

        function exportDatabase() {
            const dataToExport = {
                customProducts: customProducts,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };

            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `classification-rdd-pats-projects-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        function handleSearch() {
            const input = document.getElementById('searchInput');
            const query = input.value.toLowerCase().trim();
            const suggestionsDiv = document.getElementById('suggestions');
            const autoSearchBtn = document.getElementById('autoSearchBtn');
            
            if (query.length === 0) {
                suggestionsDiv.style.display = 'none';
                autoSearchBtn.style.display = 'none';
                return;
            }

            const filtered = getAllProducts().filter(product => 
                product.name.toLowerCase().includes(query)
            ).slice(0, 5);

            if (filtered.length === 0) {
                if (query.length > 2) {
                    suggestionsDiv.innerHTML = '<div class="no-results">Aucun produit trouv√©. Cliquez sur üåê pour rechercher en ligne.</div>';
                    suggestionsDiv.style.display = 'block';
                    autoSearchBtn.style.display = 'block';
                } else {
                    suggestionsDiv.style.display = 'none';
                    autoSearchBtn.style.display = 'none';
                }
                return;
            }

            suggestionsDiv.innerHTML = filtered.map((product, index) => `
                <div class="suggestion" onclick="selectProduct(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                    <div class="suggestion-content">
                        <div class="suggestion-icon">${product.icon}</div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">${product.name}</div>
                            <div class="suggestion-desc">${product.description}</div>
                            <div class="suggestion-badges">
                                <div class="suggestion-category category-${product.category.toLowerCase()}">${product.category}</div>
                                ${product.autoAdded ? '<div class="auto-added-badge">Auto-ajout√©</div>' : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            suggestionsDiv.style.display = 'block';
            autoSearchBtn.style.display = 'none';
        }

        function selectProduct(product) {
            selectedProduct = product;
            document.getElementById('searchInput').value = product.name;
            document.getElementById('suggestions').style.display = 'none';
            document.getElementById('autoSearchBtn').style.display = 'none';
            showSelectedProduct(product);
        }

        function showSelectedProduct(product) {
            const config = categoryConfig[product.category];
            const resultBox = document.getElementById('resultBox');
            
            resultBox.innerHTML = `
                <div class="result-header">
                    <div class="result-icon">${product.icon}</div>
                    <div class="result-info">
                        <div class="result-name">${product.name}</div>
                        <div class="result-desc">${product.description}</div>
                        ${product.autoAdded ? '<div class="auto-added-result">‚ú® Ajout√© automatiquement</div>' : ''}
                        ${product.confidence ? `<div class="confidence-badge confidence-${product.confidence}">Confiance: ${product.confidence}</div>` : ''}
                    </div>
                </div>
                <div class="classification">
                    <div class="classification-title">
                        <span>üìä</span>
                        <span>Classification RDD:</span>
                    </div>
                    <div class="classification-badge" style="background: ${config.color}">
                        üìç ${product.category}
                    </div>
                    <div class="classification-desc">${config.desc}</div>
                    <div class="instructions">
                        <div class="instructions-title">üí° Instructions de disposition:</div>
                        <div class="instructions-text">
                            Apportez ce produit √† un √©cocentre ou point de collecte de r√©sidus domestiques dangereux. 
                            Ne pas jeter aux ordures m√©nag√®res ou √† l'√©gout.
                        </div>
                    </div>
                </div>
            `;
            
            resultBox.style.display = 'block';
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                const searchTerm = document.getElementById('searchInput').value.trim();
                if (!searchTerm) return;
                
                const allProducts = getAllProducts();
                const exactMatch = allProducts.find(product => 
                    product.name.toLowerCase() === searchTerm.toLowerCase()
                );
                
                if (exactMatch) {
                    selectProduct(exactMatch);
                } else {
                    const suggestions = allProducts.filter(product =>
                        product.name.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                    
                    if (suggestions.length > 0) {
                        selectProduct(suggestions[0]);
                    } else {
                        autoSearch();
                    }
                }
            }
        }

        async function autoSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            if (!searchTerm || isSearching) return;

            isSearching = true;
            document.getElementById('searchingFor').textContent = searchTerm;
            document.getElementById('loadingIndicator').style.display = 'block';
            document.getElementById('autoSearchBtn').style.display = 'none';

            try {
                console.log(`üîç VRAIE recherche web pour: "${searchTerm}"`);
                
                // Essayer la recherche web r√©elle
                const searchResults = await performWebSearch(searchTerm);
                
                if (searchResults.length > 0) {
                    const analysisResult = await analyzeSearchResults(searchTerm, searchResults);
                    
                    if (analysisResult.isRDD && analysisResult.category) {
                        const newProduct = {
                            name: searchTerm,
                            category: analysisResult.category,
                            description: analysisResult.description || 'Produit trouv√© par recherche web',
                            icon: categoryIcons[analysisResult.category],
                            autoAdded: true,
                            custom: true,
                            confidence: analysisResult.confidence || 'moyenne',
                            webSearch: true
                        };

                        customProducts.push(newProduct);
                        saveCustomProducts();
                        selectProduct(newProduct);
                        updateCounts();
                        displayCategories();
                        
                        document.getElementById('loadingIndicator').style.display = 'none';
                        isSearching = false;
                        return;
                    }
                }
                
                // Fallback : base enrichie locale
                console.log('üîÑ Recherche web √©chou√©e, utilisation de la base enrichie...');
                const enrichedResult = searchEnrichedDatabase(searchTerm);
                
                if (enrichedResult) {
                    const newProduct = {
                        name: searchTerm,
                        category: enrichedResult.category,
                        description: enrichedResult.description,
                        icon: categoryIcons[enrichedResult.category],
                        autoAdded: true,
                        custom: true,
                        confidence: enrichedResult.confidence
                    };

                    customProducts.push(newProduct);
                    saveCustomProducts();
                    selectProduct(newProduct);
                    updateCounts();
                    displayCategories();
                } else {
                    alert(`‚ùå Impossible de classifier "${searchTerm}". Aucune information trouv√©e.`);
                }

            } catch (error) {
                console.error('‚ùå Erreur de recherche:', error);
                alert(`‚ùå Erreur lors de la recherche de "${searchTerm}".`);
            }

            document.getElementById('loadingIndicator').style.display = 'none';
            isSearching = false;
        }

        async function performWebSearch(searchTerm) {
            console.log(`üåê Tentative de recherche web pour: ${searchTerm}`);
            
            // Dans un navigateur normal, essayer les proxies CORS
            const proxies = [
                'https://api.allorigins.win/get?url=',
                'https://corsproxy.io/?',
                'https://api.codetabs.com/v1/proxy?quest='
            ];
            
            const searchUrls = [
                `https://api.duckduckgo.com/?q=${encodeURIComponent(searchTerm + ' chemical safety')}&format=json&no_redirect=1`,
                `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(searchTerm)}`
            ];
            
            for (const proxy of proxies) {
                for (const url of searchUrls) {
                    try {
                        console.log(`üîÑ Essai: ${proxy}...`);
                        const response = await fetch(proxy + encodeURIComponent(url), {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json'
                            }
                        });
                        
                        if (response.ok) {
                            let data = await response.text();
                            
                            // Traiter la r√©ponse selon le proxy
                            if (proxy.includes('allorigins')) {
                                const parsed = JSON.parse(data);
                                data = parsed.contents;
                            }
                            
                            try {
                                const jsonData = JSON.parse(data);
                                console.log('‚úÖ Donn√©es re√ßues:', jsonData);
                                
                                if (jsonData.Abstract || jsonData.Answer || jsonData.extract) {
                                    return [{
                                        source: 'Web Search',
                                        data: {
                                            title: jsonData.Heading || jsonData.title || searchTerm,
                                            abstract: jsonData.Abstract || jsonData.Answer || jsonData.extract || '',
                                            url: jsonData.AbstractURL || jsonData.content_urls?.desktop?.page || ''
                                        }
                                    }];
                                }
                            } catch (parseError) {
                                console.log('‚ùå Erreur parsing JSON:', parseError.message);
                            }
                        }
                    } catch (error) {
                        console.log(`‚ùå ${proxy} √©chou√©:`, error.message);
                    }
                }
            }
            
            console.log('‚ùå Toutes les tentatives de recherche web ont √©chou√©');
            return [];
        }

        async function autoSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            if (!searchTerm || isSearching) return;

            isSearching = true;
            document.getElementById('searchingFor').textContent = searchTerm;
            document.getElementById('loadingIndicator').style.display = 'block';
            document.getElementById('autoSearchBtn').style.display = 'none';

            try {
                console.log(`üîç Recherche pour: "${searchTerm}"`);
                
                // 1. Essayer la base enrichie d'abord (plus fiable)
                let enrichedResult = searchEnrichedDatabase(searchTerm);
                if (enrichedResult) {
                    console.log('‚úÖ Trouv√© dans la base enrichie');
                    const newProduct = {
                        name: searchTerm,
                        category: enrichedResult.category,
                        description: enrichedResult.description,
                        icon: categoryIcons[enrichedResult.category],
                        autoAdded: true,
                        custom: true,
                        confidence: enrichedResult.confidence,
                        searchMethod: 'Base enrichie'
                    };

                    customProducts.push(newProduct);
                    saveCustomProducts();
                    selectProduct(newProduct);
                    updateCounts();
                    displayCategories();
                    
                    document.getElementById('loadingIndicator').style.display = 'none';
                    isSearching = false;
                    return;
                }

                // 2. Essayer la recherche web
                console.log('üåê Tentative de recherche web...');
                const searchResults = await performWebSearch(searchTerm);
                
                if (searchResults.length > 0) {
                    const analysisResult = await analyzeSearchResults(searchTerm, searchResults);
                    
                    if (analysisResult.isRDD && analysisResult.category) {
                        console.log('‚úÖ Classification par recherche web r√©ussie');
                        const newProduct = {
                            name: searchTerm,
                            category: analysisResult.category,
                            description: analysisResult.description || 'Produit trouv√© par recherche web',
                            icon: categoryIcons[analysisResult.category],
                            autoAdded: true,
                            custom: true,
                            confidence: analysisResult.confidence || 'moyenne',
                            searchMethod: 'Recherche web'
                        };

                        customProducts.push(newProduct);
                        saveCustomProducts();
                        selectProduct(newProduct);
                        updateCounts();
                        displayCategories();
                        
                        document.getElementById('loadingIndicator').style.display = 'none';
                        isSearching = false;
                        return;
                    }
                }

                // 3. Classification intelligente locale en dernier recours
                console.log('üß† Tentative de classification intelligente...');
                const smartResult = smartClassification(searchTerm);
                
                if (smartResult) {
                    console.log('‚úÖ Classification intelligente r√©ussie');
                    const newProduct = {
                        name: searchTerm,
                        category: smartResult.category,
                        description: smartResult.description,
                        icon: categoryIcons[smartResult.category],
                        autoAdded: true,
                        custom: true,
                        confidence: 'faible',
                        searchMethod: 'Classification intelligente'
                    };

                    customProducts.push(newProduct);
                    saveCustomProducts();
                    selectProduct(newProduct);
                    updateCounts();
                    displayCategories();
                } else {
                    alert(`‚ùå Impossible de classifier "${searchTerm}". 
                    
Essayez:
‚Ä¢ Un nom plus sp√©cifique (ex: "mastic silicone" au lieu de "silicone")
‚Ä¢ Le nom de la marque (ex: "Sico raviveur")
‚Ä¢ Le type de produit (ex: "nettoyant four", "herbicide")`);
                }

            } catch (error) {
                console.error('‚ùå Erreur de recherche:', error);
                alert(`‚ùå Erreur lors de la recherche de "${searchTerm}".`);
            }

            document.getElementById('loadingIndicator').style.display = 'none';
            isSearching = false;
        }

        function searchEnrichedDatabase(searchTerm) {
            console.log(`üîç Recherche dans la base enrichie: ${searchTerm}`);
            
            const enrichedProducts = {
                // Produits silicone
                'silicone': { category: 'Organique', description: 'Mastic d\'√©tanch√©it√© √† base de silicone', confidence: '√©lev√©e' },
                'mastic silicone': { category: 'Organique', description: 'Produit d\'√©tanch√©it√© silicone pour joints', confidence: '√©lev√©e' },
                'silicone sealant': { category: 'Organique', description: 'Scellant silicone d\'√©tanch√©it√©', confidence: '√©lev√©e' },
                'caulking': { category: 'Organique', description: 'Produit de calfeutrage', confidence: 'moyenne' },
                
                // Produits Mulco
                'mulco': { category: 'Organique', description: 'Produits chimiques industriels Mulco', confidence: 'moyenne' },
                'zip seal': { category: 'Organique', description: 'Film de masquage liquide pelable', confidence: 'moyenne' },
                'mulco zip': { category: 'Organique', description: 'Film de masquage liquide de Mulco', confidence: '√©lev√©e' },
                'zip seal n peel': { category: 'Organique', description: 'Film protecteur pelable Mulco', confidence: '√©lev√©e' },
                'seal n peel': { category: 'Organique', description: 'Film de protection temporaire', confidence: 'moyenne' },
                
                // Produits Sico
                'sico raviveur': { category: 'Peinture', description: 'Raviveur et conditionneur pour bois Sico', confidence: '√©lev√©e' },
                'raviveur conditionneur': { category: 'Peinture', description: 'Produit de restauration pour bois', confidence: 'moyenne' },
                'sico conditionneur': { category: 'Peinture', description: 'Conditionneur pour bois ext√©rieur Sico', confidence: '√©lev√©e' },
                
                // Autres produits sp√©cialis√©s
                'goo gone': { category: 'Organique', description: 'Enl√®ve-adh√©sifs et r√©sidus', confidence: '√©lev√©e' },
                'goof off': { category: 'Organique', description: 'D√©capant multi-usage', confidence: '√©lev√©e' },
                'armor all': { category: 'Organique', description: 'Protectant plastiques et vinyle', confidence: '√©lev√©e' },
                'rain-x': { category: 'Organique', description: 'Traitement hydrophobe pare-brise', confidence: '√©lev√©e' },
                'seafoam': { category: 'Organique', description: 'Additif nettoyant moteur', confidence: '√©lev√©e' },
                'marvel mystery oil': { category: 'Huiles', description: 'Additif huile multifonction', confidence: '√©lev√©e' },
                'deck wash': { category: 'Base', description: 'Nettoyant pour terrasse en bois', confidence: '√©lev√©e' },
                'deck brightener': { category: 'Acide', description: '√âclaircissant pour terrasse', confidence: '√©lev√©e' }
            };

            const searchTermLower = searchTerm.toLowerCase();
            
            // Recherche exacte
            if (enrichedProducts[searchTermLower]) {
                console.log(`‚úÖ Correspondance exacte trouv√©e: ${enrichedProducts[searchTermLower].description}`);
                return enrichedProducts[searchTermLower];
            }
            
            // Recherche partielle avec scoring
            let bestMatch = null;
            let bestScore = 0;
            
            for (const [key, product] of Object.entries(enrichedProducts)) {
                let score = 0;
                const keyWords = key.split(/\s+/);
                const searchWords = searchTermLower.split(/\s+/);
                
                // Score pour correspondance de mots
                for (const searchWord of searchWords) {
                    if (searchWord.length > 2) {
                        for (const keyWord of keyWords) {
                            if (keyWord === searchWord) score += 10;
                            else if (keyWord.includes(searchWord) || searchWord.includes(keyWord)) score += 5;
                        }
                    }
                }
                
                // Score pour inclusion
                if (searchTermLower.includes(key)) score += 8;
                if (key.includes(searchTermLower)) score += 6;
                
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = product;
                }
            }
            
            if (bestMatch && bestScore >= 5) {
                console.log(`‚úÖ Correspondance partielle trouv√©e (score: ${bestScore}): ${bestMatch.description}`);
                return bestMatch;
            }
            
            console.log(`‚ùå Aucune correspondance dans la base enrichie`);
            return null;
        }

        function smartClassification(searchTerm) {
            console.log(`üß† Classification intelligente: ${searchTerm}`);
            
            const text = searchTerm.toLowerCase();
            const patterns = [
                // Patterns sp√©cifiques
                { keywords: ['silicone', 'mastic', 'sealant', 'caulk'], category: 'Organique', description: 'Produit d\'√©tanch√©it√©' },
                { keywords: ['zip', 'peel', 'mask'], category: 'Organique', description: 'Film de masquage' },
                { keywords: ['raviveur', 'conditionneur', 'restaur'], category: 'Peinture', description: 'Produit de restauration' },
                { keywords: ['cleaner', 'nettoyant', 'detergent'], category: 'Base', description: 'Produit nettoyant' },
                { keywords: ['oil', 'huile', 'lubri'], category: 'Huiles', description: 'Lubrifiant' },
                { keywords: ['paint', 'peinture', 'stain'], category: 'Peinture', description: 'Produit de peinture' },
                { keywords: ['solvent', 'solvant', 'thinner'], category: 'Organique', description: 'Solvant' },
                { keywords: ['fuel', 'carburant', 'gas'], category: 'Combustible', description: 'Carburant' },
                { keywords: ['acid', 'acide'], category: 'Acide', description: 'Produit acide' },
                { keywords: ['pest', 'weed', 'insect'], category: 'Toxique', description: 'Pesticide' }
            ];
            
            for (const pattern of patterns) {
                for (const keyword of pattern.keywords) {
                    if (text.includes(keyword)) {
                        console.log(`‚úÖ Pattern trouv√©: ${keyword} ‚Üí ${pattern.category}`);
                        return {
                            category: pattern.category,
                            description: pattern.description + ' (classification par pattern)'
                        };
                    }
                }
            }
            
            console.log(`‚ùå Aucun pattern trouv√©`);
            return null;
        }

        function displayCategories() {
            const counts = getCategoryCounts();
            const container = document.getElementById('categoriesContainer');
            
            container.innerHTML = Object.entries(categoryConfig).map(([category, config]) => {
                const count = counts[category] || 0;
                const icon = categoryIcons[category];
                
                return `
                    <div class="category-card" style="background: ${config.bg}; border-left-color: ${config.color};">
                        <div class="category-header">
                            <div class="category-icon" style="background: ${config.color};">
                                ${icon}
                            </div>
                            <div class="category-details">
                                <div class="category-name" style="color: ${config.color};">
                                    ${category}
                                </div>
                                <div class="category-description">${config.desc}</div>
                                <div class="category-count">${count} produits</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomProducts();
            updateCounts();
            displayCategories();
            
            // Cacher les suggestions quand on clique ailleurs
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.search-box')) {
                    document.getElementById('suggestions').style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>